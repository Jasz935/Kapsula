<!doctype html><html lang="es"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Kapsula — Creación de Presupuesto (Prototipo)</title><script defer="defer" src="/Kapsula/static/js/main.eb9aa607.js"></script><link href="/Kapsula/static/css/main.fa2ea184.css" rel="stylesheet"></head><body><div class="page"><main class="container" role="main" aria-labelledby="title"><header class="top"><div class="brand" aria-hidden="true">Kapsula</div><button class="help" aria-label="Ayuda">Ayuda</button></header><h1 id="title">Creación de Presupuesto</h1><form id="budgetForm" class="card" novalidate><div><label for="salary">Ingrese su salario total</label><div class="input-row" style="gap:10px"><div class="currency-prefix" aria-hidden="true">$</div><input id="salary" name="salary" placeholder="Ej: 2500000" min="0" step="1" aria-describedby="salaryHelp" required/></div><div id="salaryHelp" class="hint">Ingrese el ingreso mensual neto (sin puntos ni comas si usa número).</div></div><div><label>Ingrese la cantidad a usar por categoría</label><div style="display:grid;gap:10px"><div class="row-2col"><div>Gastos mensuales</div><div class="percent-box"><input id="gastos" class="number-input" min="0" max="salary" step="1" placeholder="$" aria-label="Gastos mensuales ($)" required/><div class="hint" style="margin-top:6px;color:var(--muted)">$COP</div></div></div><div class="row-2col"><div>Ahorro / Inversión</div><div class="percent-box"><input id="ahorro" class="number-input" min="0" max="salary" step="1" placeholder="$" aria-label="Ahorro o inversión ($)" required/><div class="hint" style="margin-top:6px;color:var(--muted)">$COP</div></div></div><div class="row-2col"><div>Libre</div><div class="percent-box"><input id="libre" class="number-input" min="0" max="100" step="1" placeholder="$" aria-label="Dinero libre ($)" required/><div class="hint" style="margin-top:6px;color:var(--muted)">$COP</div></div></div></div><div style="display:flex;gap:10px;margin-top:12px;align-items:center"><div id="sumNote" class="note" role="alert">La suma de montos debe ser igual al salario base ingresado.</div><div id="sumOk" class="sum-ok">Total = <span id="totalSum">0</span>$</div></div></div><div class="actions" style="margin-top:6px"><button id="createBtn" class="btn" type="submit" disabled="disabled">Crear Presupuesto</button></div></form></main></div><script>const gastos=document.getElementById("gastos"),ahorro=document.getElementById("ahorro"),libre=document.getElementById("libre"),totalSumEl=document.getElementById("totalSum"),sumNote=document.getElementById("sumNote"),sumOk=document.getElementById("sumOk"),createBtn=document.getElementById("createBtn"),form=document.getElementById("budgetForm"),salary=document.getElementById("salary");function parseInputValue(e){return e&&e.value&&Number(e.value.replace(/\D/g,""))||0}function formatNumberInput(e){const t=e.selectionStart,a=e.value.length;let r=e.value.replace(/\D/g,"");if(""===r)return e.value="",0;const n=Number(r);e.value=n.toLocaleString("es-CO");try{const r=e.value.length-a,n=Math.max(0,t+r);e.setSelectionRange(n,n)}catch(e){}return n}function updateSum(){const e=parseInputValue(gastos)+parseInputValue(ahorro)+parseInputValue(libre);totalSumEl.textContent=e.toLocaleString("es-CO");const t=parseInputValue(salary);t>0&&e===t?(sumNote.style.display="none",sumOk.style.display="inline-block",createBtn.disabled=!1):(sumOk.style.display="none",sumNote.style.display="inline-block",createBtn.disabled=!0)}salary.addEventListener("input",()=>{formatNumberInput(salary),updateSum()}),salary.addEventListener("blur",()=>{if(""===salary.value)return;const e=parseInputValue(salary);salary.value=0===e?"":e.toLocaleString("es-CO"),updateSum()}),[gastos,ahorro,libre].forEach(e=>{e.addEventListener("input",()=>{formatNumberInput(e),updateSum()}),e.addEventListener("blur",()=>{if(""===e.value)return;let t=parseInputValue(e);t<0&&(t=0);const a=parseInputValue(salary);a>0&&t>a&&(t=a),e.value=0===t?"":t.toLocaleString("es-CO"),updateSum()})}),form.addEventListener("submit",e=>{e.preventDefault();const t=parseInputValue(gastos),a=parseInputValue(ahorro),r=parseInputValue(libre),n=t+a+r,l=parseInputValue(salary);if(n!==l)return void alert("La suma de gastos, ahorro y libre debe ser igual al salario total.");const u={salary:l,gastos:t,ahorro:a,libre:r};alert("Presupuesto creado ✅\n\nSalario: $"+u.salary.toLocaleString("es-CO")+"\nGastos: $"+u.gastos.toLocaleString("es-CO")+"\nAhorro: $"+u.ahorro.toLocaleString("es-CO")+"\nLibre: $"+u.libre.toLocaleString("es-CO"))}),updateSum()</script></body></html>